[gd_scene load_steps=12 format=2]

[ext_resource path="res://scenes/levels/Level1.tscn" type="PackedScene" id=1]
[ext_resource path="res://scenes/Staff.tscn" type="PackedScene" id=2]
[ext_resource path="res://scenes/Gem.tscn" type="PackedScene" id=3]
[ext_resource path="res://scripts/equipment.gd" type="Script" id=4]
[ext_resource path="res://resources/font.tres" type="DynamicFont" id=5]
[ext_resource path="res://scenes/Player.tscn" type="PackedScene" id=6]
[ext_resource path="res://health bar4.png" type="Texture" id=7]
[ext_resource path="res://health.png" type="Texture" id=8]

[sub_resource type="Environment" id=1]
background_mode = 4
background_canvas_max_layer = 1
glow_enabled = true
glow_blend_mode = 0
glow_hdr_luminance_cap = 0.5
glow_hdr_scale = 4.0

[sub_resource type="GDScript" id=2]
script/source = "extends Label


func _ready():
	pass
	
func _physics_process(delta):
	text = str(Performance.get_monitor(Performance.TIME_FPS))
"

[sub_resource type="GDScript" id=3]
script/source = "extends Node
onready var player = get_parent().get_parent().get_parent().get_node(\"Player\")

var max_health 
func _ready():
	max_health = $health.scale.x
	
func _physics_process(delta):
	print(max_health)
	$health.scale.x = max_health * float(player.health / 100)
	print((player.health / 100))

"

[node name="main" type="Node"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 1 )

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color( 0, 0, 0, 1 )
__meta__ = {
"_edit_lock_": true
}

[node name="ColorRect" type="ColorRect" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0.176471, 0.0823529, 0.301961, 1 )
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="HUD" type="Control" parent="CanvasLayer"]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="FPScounter" type="Label" parent="CanvasLayer/HUD"]
anchor_top = 1.0
anchor_bottom = 1.0
margin_top = -14.0
margin_right = 40.0
custom_fonts/font = ExtResource( 5 )
text = "FPS"
script = SubResource( 2 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="statsBar" type="Node" parent="CanvasLayer/HUD"]
script = SubResource( 3 )

[node name="health" type="Sprite" parent="CanvasLayer/HUD/statsBar"]
modulate = Color( 1.2, 0.1, 0, 1 )
position = Vector2( 6.89811, 34.9115 )
scale = Vector2( 7.00692, 5.0295 )
texture = ExtResource( 8 )
centered = false

[node name="bar" type="Sprite" parent="CanvasLayer/HUD/statsBar"]
position = Vector2( 0, 3.72529e-09 )
scale = Vector2( 7, 5 )
texture = ExtResource( 7 )
centered = false

[node name="level" type="Node" parent="."]

[node name="Level1" parent="level" instance=ExtResource( 1 )]

[node name="Player" parent="." instance=ExtResource( 6 )]
position = Vector2( 50, 367 )

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Player"]
remote_path = NodePath("../../Camera2D")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2( 50, 367 )
rotating = true
current = true
zoom = Vector2( 0.4, 0.4 )
process_mode = 0
limit_left = -25
limit_top = -25
limit_right = 625
limit_bottom = 425
smoothing_enabled = true
smoothing_speed = 4.0
editor_draw_limits = true
editor_draw_drag_margin = true

[node name="equipmentContainer" type="Node" parent="."]
script = ExtResource( 4 )

[node name="Gem" parent="equipmentContainer" instance=ExtResource( 3 )]
position = Vector2( 44.9478, 358.258 )

[node name="Staff" parent="equipmentContainer" instance=ExtResource( 2 )]
position = Vector2( 44.3764, 368.083 )
